# Usamos una imagen base de Golang 1.21.1
FROM golang:1.21.1

# Establecemos el directorio de trabajo en /app
WORKDIR /app

# Copiamos los archivos go.mod y go.sum a la imagen
COPY go.mod .
COPY go.sum .

# Descargamos e instalamos las dependencias del proyecto
RUN go mod download

# Copiamos el c칩digo fuente y los archivos protobuf
COPY ../proto /app/proto
COPY ../america /app/america

# Compilamos el c칩digo de Go
RUN go build -o america


# Exponemos el puerto en el que se ejecutar치 el servidor
EXPOSE 8080

# Comando para ejecutar la aplicaci칩n
CMD ["./america"]